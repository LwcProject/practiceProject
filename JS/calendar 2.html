<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="Generator" content="EditPlus®">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <title>Document</title>
  <style>
  .clear:after{
		content:"";
		display:table;
		clear:both;
  }
  .left{
	float:left;
  }
  ul{
	padding:0px;
	margin-top:5px;
	margin-bottom:0px;
  }
	ul>li{
		float:left;
		list-style:none;
		width:30px;
		height: 21px;
		border: 1px solid #ccc;
		text-align:center;
	}
	.gray{
		color:#766565;
	}
	.top {
		height:17px;
	}
	.top .lf-tri{
		border:5px solid transparent;
		border-right-color:black;
		width:5px;
		margin-top:4px;
	}
	.top .rf-tri{
		border:5px solid transparent;
		border-left-color:black;
		width:5px;
		margin-top:4px;
	}
	.top .content{
		width:178px;
		height:5px;
		text-align:center;
	}
  </style>
 </head>
 <body>
	<div class="top clear">
		<div class="left lf-tri"></div>
		<div class="left content">2017年2月</div>
		<div class="left rf-tri"></div>
	</div>
	<div>
		<div id="week">
			<ul class="clear">
				<li>日</li>
				<li>一</li>
				<li>二</li>
				<li>三</li>
				<li>四</li>
				<li>五</li>
				<li>六</li>
			<ul>
		</div>
		<div id="date">
			<ul class="clear">
				<li class="gray">30</li>
				<li class="gray">31</li>
				<li>1</li>
				<li>2</li>
				<li>3</li>
				<li>4</li>
				<li>5</li>
			</ul>
			<ul class="clear">
				<li>6</li>
				<li>7</li>
				<li>8</li>
				<li>9</li>
				<li>10</li>
				<li>11</li>
				<li>12</li>
			</ul>
			<ul class="clear">
				<li>13</li>
				<li>14</li>
				<li>15</li>
				<li>16</li>
				<li>17</li>
				<li>18</li>
				<li>19</li>
			</ul>
			<ul class="clear">
				<li>20</li>
				<li>21</li>
				<li>22</li>
				<li>23</li>
				<li>24</li>
				<li>25</li>
				<li>26</li>
			</ul>
			<ul class="clear">
				<li>27</li>
				<li>28</li>
				<li class="gray">1</li>
				<li class="gray">2</li>
				<li class="gray">3</li>
				<li class="gray">4</li>
				<li class="gray">5</li>
			</ul>
			<ul class="clear">
				<li>27</li>
				<li>28</li>
				<li class="gray">1</li>
				<li class="gray">2</li>
				<li class="gray">3</li>
				<li class="gray">4</li>
				<li class="gray">5</li>
			</ul>
		</div>
	 </div>
  <script>

	function $(id){
		return document.getElementById(id);
	}

	function loadCalendar(){
		//获取年、月
		var today = new Date();
		var year=today.getFullYear(), month = today.getMonth();
		//获取第一天是星期几
		var firstDay = (new Date(year,month,1)).getDay();


		//获取ul元素
		var uls=$("date").children , num=1 ,totalDay;
		/*for (var tt = 0;tt< uls.length ;tt++ )
		{
			console.log(uls[tt]);
		}*/
		//获取月份天数
		totalDay=getMonthDays(year,month+1);
		// 类数组对象 转 数组
		//uls = Array.prototype.slice.call(uls)
		//获取li元素  填充
		var list;
		for(var r=0;r<uls.length;r++){
			list=uls[r].children;
			for(var h=0;h<list.length;h++){
				//在第一行 与第一天进行判断 等于第一天讲载入
				if(r==0){
					if(h>=firstDay){
						//list[h].innerHTML=num++;
						result=1;
					}else {
						//list[h].innerHTML="";
						result=0;
					}
				}else {
					//判断是否超出天数 ,不超出则继续加，超出则写空
					if(num<=totalDay){
						result=1;
						//list[h].innerHTML=num++;
					}else {
						result=0;
						//list[h].innerHTML="";
					}
				}
				result? list[h].innerHTML=num++ : list[h].innerHTML="";
			}
		}
	}
	function getMonthDays(year,month){
		//判断2月天数
		var days;
		if(month==2){
			days= (year%4==0)&&(year%100!=0)||(year%400==0)? 29:28;
			
		}else {
			//1-7月 单数月为31日 
			if(month<7){
				days= month%2==1?31:30;
			}else {
				//8-12月 双月为31日
				days = month%2==0?31:30;
			}
		}
		return days;		
	}
	loadCalendar()
	 </script>
 </body>
</html>
