<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title></title>
        <style media="screen">
            .nav {
                width: 100%;
                height: 300px;
            }
            ul {
                list-style: none;
            }
            ul li {
                float: left;
                width: 50px;
                height: 50px;
                border: 1px solid #E7EEEF;
                text-align: center;
                line-height: 50px;
                cursor: pointer;
            }
            /*#adlist {
                list-style: none;
            }
            #adlist li {
                float: left;
                width: 50px;
                height: 50px;
            }*/
            .active {
                background-color: #25C8E0;
            }
        </style>
    </head>
    <body>
        <div class="nav">

        </div>
        <ul>
            <li id="firstPage">首页</li>
            <li id="prePage">上一页</li>
        </ul>
        <ul id="adlist">
            <li class="active">2</li>
            <li>3</li>
            <li>4</li>
            <li>5</li>
            <li>6</li>
       </ul>
        <ul>
            <li id="nextPage">下一页</li>
            <li id="lastPage">尾页</li>
        </ul>
        <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
        <script type="text/javascript">
            // 假如url没有参数
            // 最大页码
            var pageNumMax = 5;

            // 显示多少页码
            var pageShow = 5; // 默认显示5个页码
            // li显示的值在数组里面，通过操作数组来改变li的html
            var pageList = [1,2,3,4,5];

            // 根据数组的长度渲染页码li
            function loadLi() {
                var liShow = '';
                for (var i = 1; i < pageList.length + 1; i++) {
                    if (i == 1) {
                        liShow = '<li class="active"> ' + i + '</li>';
                    } else {
                        liShow += '<li> ' + i + '</li>';
                    }
                }
                $('#adlist').html(liShow);
            }
            // 开始渲染
            loadLi();
            // 禁用按钮功能
            function disableButton(selector) {
                $(selector).css({'cursor': 'not-allowed'});
            }
            function enableButton(selector) {
                $(selector).css({'cursor': 'pointer'});
            }

            // 获取当前页
            function getCurrentPage() {
                var currentPage = 0; //默认第一页 ，渲染li下标是从0开始
                var haveActive = false;
                $('#adlist li').each(function (index) {
                    if ($(this).attr('class') == 'active') {
                        currentPage = parseInt($(this).html());
                        haveActive = true;
                        // 跳出遍历循环
                        return false;
                    }
                });
                // 循环一次都没有找到active
                if (haveActive === false) {
                    alert('获取当前页码出错');
                }
                return currentPage;
            }

            // 获取active的下标
            function getActiveInd() {
                var activeInd = 1; // 默认1
                $('#adlist li').each(function (index) {
                    if ($(this).attr('class') == 'active') {
                        activeInd = index;
                        // 跳出遍历循环
                        return false;
                    }
                });
                return activeInd;
            }

            /*切换页码的active状态
            * selector 页码选择器
            * index active的下标
            */
            function switchActive(selector, index) {
                $(selector).removeClass('active');
                $(selector).eq(index).attr('class', 'active');
            }

            // 如果当前页是第一页就禁用首页和上页按钮
            function firstPageDeal() {
                if (getCurrentPage() === 1) {
                    disableButton('#firstPage');
                    disableButton('#prePage');
                }
            }
            firstPageDeal();

            // 如果当前页是尾页禁用下页和尾页
            function lastPageDeal() {
                if (getCurrentPage() === pageNumMax) {
                    disableButton('#nextPage');
                    disableButton('#lastPage');
                }
            }


            // 如果最大页码小于显示的最大页码，就禁用最大页码后面的页码按钮
            if (pageNumMax < pageList[pageList.length - 1]) {
                for (var i = pageNumMax; i< pageList[pageList.length - 1]; i++) {
                    disableButton('#adlist li:eq(' + i + ')');
                }
            }

            // 如果最后一个显示的页码等于最大页数，禁用尾页
            if (pageList[pageList.length - 1] == pageNumMax) {
                disableButton('#lastPage');
            }

            // 点击对应的页码切换active
            $('#adlist li').click(function() {
                    $('#adlist li').removeClass('active');
                    $(this).addClass('active');
                    // 如果当前页大于第一页就启用首页和尾页
                    console.log(getCurrentPage());
                    if (getCurrentPage() > 1) {
                        enableButton('#firstPage');
                        enableButton('#prePage');
                    } else {
                        disableButton('#firstPage');
                        disableButton('#prePage');
                    }
            });

            // 点击上一页功能
            // 分两种情况 1 active在第一个li时并且li的页码不是1，需要刷新页码数组 然后acitve一直在第一个li
            // 2 actvie不在第一个时，不用刷新数组，直接切换active
            function prePage() {
                // 获取第一个li的页码，判断是不是一
                // var firstLiVal = parseInt($('#adlist li').eq(0).html());
                // var pageNum; // 获取要切换的页码
                // console.log(firstLiVal);
                // $('#adlist li').each(function(index, elem) {
                //     // active是不是在第一个li
                //     if ($(this).attr('class') == 'active' && index == 0 && firstLiVal >= 1) {
                //         console.log('active是在第一个');
                //         // TODO: 刷新数组操作
                //         // 结束each循环
                //         return false;
                //     } else {
                //         // TODO:切换active
                //         console.log('不是第一');
                //         pageNum = getActiveInd() - 1;
                //         console.log(pageNum);
                //         switchActive('#adlist li', pageNum);
                //         firstPageDeal();
                //         // 结束each循环
                //         return false;
                //     }
                // });
                $('#adlist').find('li.active').removeClass('active').prev().addClass('active');
            }
            $('#prePage').click(function() {
                // 按钮禁用时不能按上一页
                if ($(this).css('cursor') === 'not-allowed') return;
                prePage();
            });

            // 点击下一页功能
            // 与上一页功能类似
            // 1 当前active是否是最后一个li并且要li的值小于最大页码
            // 不小于li的情况直接切换active
            function nextPage() {
                // 获取最后一li的页码，判断是不是最大页码
                // var lastLiVal = parseInt($('#adlist li').eq(0).html());
                // var pageNum; // 获取要切换的页码
                // console.log(lastLiVal);
                // $('#adlist li').each(function(index, elem) {
                //     // active是不是在第一个li
                //     if ($(this).attr('class') == 'active' && index == 4 && lastLiVal <= pageNumMax) {
                //         console.log('active是在第最后一个');
                //         // TODO: 刷新数组操作
                //         // 结束each循环
                //         return false;
                //     } else {
                //         // TODO:切换active
                //         console.log('不是最后一个');
                //         pageNum = getActiveInd() + 1;
                //         console.log(pageNum);
                //         switchActive('#adlist li', pageNum);
                //         lastPageDeal();
                //         // 结束each循环
                //         return false;
                //     }
                // });
                $('#adlist').find('li.active').removeClass('active').next().addClass('active')
            }
            $('#nextPage').click(function() {
                if ($(this).css('cursor') === 'not-allowed') return;
                nextPage();
            });
        </script>
    </body>
</html>
